# HotDog 2030 æ™ºèƒ½è¿è¥é©¾é©¶èˆ± - é¡¹ç›®æ¶æ„åˆ†æ

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: HotDog 2030 æ™ºèƒ½è¿è¥é©¾é©¶èˆ±  
**æŠ€æœ¯æ ˆ**: Node.js + TypeScript + React + SQL Server + Python ETL  
**æ¶æ„æ¨¡å¼**: å¾®æœåŠ¡ + æ•°æ®ä»“åº“ + æ™ºèƒ½åˆ†æ  

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### 1. æ•°æ®å±‚ (Database Layer)
```
cyrg2025 (ä¸»ä¸šåŠ¡æ•°æ®åº“)
â”œâ”€â”€ orders (è®¢å•è¡¨)
â”œâ”€â”€ order_items (è®¢å•æ˜ç»†)
â”œâ”€â”€ customers (å®¢æˆ·è¡¨)
â”œâ”€â”€ stores (é—¨åº—è¡¨)
â”œâ”€â”€ products (å•†å“è¡¨)
â””â”€â”€ PlatformSettle (å¹³å°ç»“ç®—)

cyrgweixin (å¾®ä¿¡å°ç¨‹åºæ•°æ®åº“)
â”œâ”€â”€ Rg_SeekShop (é€‰å€å€™é€‰)
â””â”€â”€ å…¶ä»–å¾®ä¿¡ç›¸å…³è¡¨

hotdog2030 (åˆ†ææ•°æ®ä»“åº“)
â”œâ”€â”€ fact_profit_daily (æ¯æ—¥åˆ©æ¶¦åˆ†æ)
â”œâ”€â”€ dim_customer_segment (å®¢æˆ·åˆ†ç¾¤)
â”œâ”€â”€ fact_site_score (é€‰å€è¯„åˆ†)
â”œâ”€â”€ fact_alerts (å¼‚å¸¸å‘Šè­¦)
â””â”€â”€ vw_revenue_reconciliation (æ”¶å…¥å¯¹è´¦è§†å›¾)
```

### 2. ETLå±‚ (æ•°æ®æŠ½å–è½¬æ¢åŠ è½½)
```
etl/
â”œâ”€â”€ lib/mssql.py (æ•°æ®åº“è¿æ¥åº“)
â”œâ”€â”€ steps/
â”‚   â”œâ”€â”€ 01_extract_orders.py (è®¢å•æŠ½å–)
â”‚   â”œâ”€â”€ 02_extract_order_items.py (è®¢å•æ˜ç»†æŠ½å–)
â”‚   â”œâ”€â”€ 03_extract_stores.py (é—¨åº—æŠ½å–)
â”‚   â”œâ”€â”€ 04_extract_products.py (å•†å“æŠ½å–)
â”‚   â”œâ”€â”€ 05_extract_customers.py (å®¢æˆ·æŠ½å–)
â”‚   â”œâ”€â”€ 06_profit_analysis.py (åˆ©æ¶¦åˆ†æ)
â”‚   â”œâ”€â”€ 07_customer_segmentation.py (å®¢æˆ·åˆ†ç¾¤)
â”‚   â”œâ”€â”€ 08_forecast_sales.py (é”€å”®é¢„æµ‹)
â”‚   â”œâ”€â”€ 09b_site_selection_gravity.py (é€‰å€é‡åŠ›æ¨¡å‹)
â”‚   â””â”€â”€ 11_alerts_detect.py (å¼‚å¸¸æ£€æµ‹)
â””â”€â”€ run_etl.py (ETLæ‰§è¡Œå™¨)
```

### 3. åç«¯æœåŠ¡å±‚ (Backend API)
```
backend/src/
â”œâ”€â”€ modules/ (ä¸šåŠ¡æ¨¡å—)
â”‚   â”œâ”€â”€ metrics/ (æŒ‡æ ‡åˆ†æ)
â”‚   â”œâ”€â”€ segments/ (å®¢æˆ·åˆ†ç¾¤)
â”‚   â”œâ”€â”€ site/ (é€‰å€è¯„åˆ†)
â”‚   â””â”€â”€ alerts/ (å¼‚å¸¸å‘Šè­¦)
â”œâ”€â”€ routes/ (APIè·¯ç”±)
â”‚   â”œâ”€â”€ operations.ts (è¿è¥åˆ†æ)
â”‚   â”œâ”€â”€ customerProfile.ts (å®¢æˆ·ç”»åƒ)
â”‚   â”œâ”€â”€ salesPrediction.ts (é”€å”®é¢„æµ‹)
â”‚   â””â”€â”€ dashboard.ts (ä»ªè¡¨æ¿)
â”œâ”€â”€ services/ (ä¸šåŠ¡æœåŠ¡)
â””â”€â”€ config/ (é…ç½®ç®¡ç†)
```

### 4. å‰ç«¯å±•ç¤ºå±‚ (Frontend UI)
```
frontend/src/
â”œâ”€â”€ pages/ (é¡µé¢ç»„ä»¶)
â”‚   â”œâ”€â”€ DashboardHotdog.tsx (æ™ºèƒ½é©¾é©¶èˆ±)
â”‚   â”œâ”€â”€ Operations.tsx (è¿è¥åˆ†æ)
â”‚   â”œâ”€â”€ CustomerProfile.tsx (å®¢æˆ·ç”»åƒ)
â”‚   â””â”€â”€ SalesComparison.tsx (é”€å”®å¯¹æ¯”)
â”œâ”€â”€ components/ (é€šç”¨ç»„ä»¶)
â”‚   â”œâ”€â”€ AIInsights.tsx (AIæ´å¯Ÿ)
â”‚   â”œâ”€â”€ SalesPredictionChart.tsx (é”€å”®é¢„æµ‹å›¾è¡¨)
â”‚   â””â”€â”€ SiteSelectionModel.tsx (é€‰å€æ¨¡å‹)
â””â”€â”€ services/ (å‰ç«¯æœåŠ¡)
```

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. æ™ºèƒ½é©¾é©¶èˆ± (DashboardHotdog)
- **åŠŸèƒ½**: å®æ—¶æ•°æ®å±•ç¤ºã€è¶‹åŠ¿åˆ†æã€å¼‚å¸¸ç›‘æ§
- **æŠ€æœ¯**: React + Ant Design + ECharts
- **æ•°æ®æº**: `/api/metrics/dashboard` èšåˆæ¥å£

### 2. å®¢æˆ·åˆ†ç¾¤åˆ†æ (Customer Segmentation)
- **ç®—æ³•**: RFMæ¨¡å‹ (Recency, Frequency, Monetary)
- **å®ç°**: Python ETL + SQL Serverå­˜å‚¨è¿‡ç¨‹
- **å±•ç¤º**: å®¢æˆ·ä»·å€¼åˆ†å±‚ã€è¡Œä¸ºåˆ†æ

### 3. é”€å”®é¢„æµ‹ (Sales Prediction)
- **ç®—æ³•**: LightGBM/XGBoostæœºå™¨å­¦ä¹ 
- **ç‰¹å¾**: å†å²é”€å”®ã€å­£èŠ‚æ€§ã€èŠ‚å‡æ—¥ã€å¤©æ°”
- **è¾“å‡º**: æœªæ¥7-30å¤©é”€å”®é¢„æµ‹

### 4. é€‰å€è¯„åˆ† (Site Selection)
- **æ¨¡å‹**: é‡åŠ›æ¨¡å‹ (Gravity Model)
- **å› å­**: å¸‚åœºåŒ¹é…åº¦ã€ç«äº‰èš•é£Ÿã€è·ç¦»è¡°å‡
- **æ•°æ®**: ç»çº¬åº¦ã€å•†åœˆæ•°æ®ã€å†å²ä¸šç»©

### 5. å¼‚å¸¸æ£€æµ‹ (Anomaly Detection)
- **è§„åˆ™**: ç¯æ¯”ä¸‹é™ã€æ¯›åˆ©ç‡å¼‚å¸¸ã€å·®è¯„æ¿€å¢
- **é˜ˆå€¼**: è¥æ”¶â†“20%ã€æ¯›åˆ©ç‡<45%ã€åˆ°æ‰‹å‡€é¢â†“25%
- **å‘Šè­¦**: å®æ—¶ç›‘æ§ã€åˆ†çº§é¢„è­¦

## ğŸ“Š æ•°æ®æµæ¶æ„

```
æ•°æ®æº â†’ ETLå¤„ç† â†’ æ•°æ®ä»“åº“ â†’ APIæœåŠ¡ â†’ å‰ç«¯å±•ç¤º
  â†“         â†“         â†“         â†“         â†“
cyrg2025  Python    hotdog2030  Node.js   React
cyrgweixin  ETL      åˆ†æè¡¨       REST     Ant Design
```

## ğŸš€ æŠ€æœ¯ç‰¹ç‚¹

### 1. æ•°æ®é›†æˆ
- **å¤šæºèåˆ**: ä¸šåŠ¡ç³»ç»Ÿ + å¾®ä¿¡å°ç¨‹åº + å¤–éƒ¨æ•°æ®
- **å®æ—¶åŒæ­¥**: å¢é‡ETL + æ•°æ®ä¸€è‡´æ€§ä¿è¯
- **å£å¾„ç»Ÿä¸€**: æ”¶å…¥ã€æˆæœ¬ã€åˆ©æ¶¦æŒ‡æ ‡æ ‡å‡†åŒ–

### 2. æ™ºèƒ½åˆ†æ
- **æœºå™¨å­¦ä¹ **: é”€å”®é¢„æµ‹ã€å®¢æˆ·åˆ†ç¾¤ã€é€‰å€è¯„åˆ†
- **å®æ—¶è®¡ç®—**: å¼‚å¸¸æ£€æµ‹ã€è¶‹åŠ¿åˆ†æã€KPIç›‘æ§
- **å¯è§†åŒ–**: å›¾è¡¨å±•ç¤ºã€äº¤äº’åˆ†æã€é’»å–æŸ¥è¯¢

### 3. ç³»ç»Ÿæ¶æ„
- **å¾®æœåŠ¡**: æ¨¡å—åŒ–è®¾è®¡ã€ç‹¬ç«‹éƒ¨ç½²ã€æ°´å¹³æ‰©å±•
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **APIä¼˜å…ˆ**: RESTfulæ¥å£ã€å‰åç«¯åˆ†ç¦»

## ğŸ” ä»£ç è´¨é‡åˆ†æ

### ä¼˜åŠ¿
1. **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„ç›®å½•ç»“æ„å’ŒèŒè´£åˆ†ç¦»
2. **ç±»å‹å®‰å…¨**: TypeScript + æ¥å£å®šä¹‰
3. **è‡ªåŠ¨åŒ–**: ETLè„šæœ¬ + éƒ¨ç½²è„šæœ¬
4. **æ–‡æ¡£å®Œå–„**: README + ä»£ç æ³¨é‡Š

### æ”¹è¿›ç©ºé—´
1. **é”™è¯¯å¤„ç†**: ç»Ÿä¸€å¼‚å¸¸å¤„ç†æœºåˆ¶
2. **æµ‹è¯•è¦†ç›–**: å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯•
3. **æ€§èƒ½ä¼˜åŒ–**: æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
4. **å®‰å…¨åŠ å›º**: è®¤è¯æˆæƒ + æ•°æ®åŠ å¯†

## ğŸ“ˆ ä¸šåŠ¡ä»·å€¼

### 1. è¿è¥æ•ˆç‡
- **æ•°æ®é©±åŠ¨**: å®æ—¶ç›‘æ§ã€å¿«é€Ÿå†³ç­–
- **æ™ºèƒ½é¢„è­¦**: å¼‚å¸¸å‘ç°ã€é£é™©æ§åˆ¶
- **è‡ªåŠ¨åŒ–**: å‡å°‘äººå·¥ã€æé«˜å‡†ç¡®æ€§

### 2. å•†ä¸šæ´å¯Ÿ
- **å®¢æˆ·åˆ†æ**: ä»·å€¼åˆ†å±‚ã€è¡Œä¸ºé¢„æµ‹
- **é€‰å€ä¼˜åŒ–**: ç§‘å­¦å†³ç­–ã€é™ä½é£é™©
- **é”€å”®é¢„æµ‹**: éœ€æ±‚è§„åˆ’ã€åº“å­˜ä¼˜åŒ–

### 3. æŠ€æœ¯ä»·å€¼
- **å¯æ‰©å±•**: å¾®æœåŠ¡æ¶æ„ã€æ¨¡å—åŒ–è®¾è®¡
- **å¯ç»´æŠ¤**: ä»£ç è§„èŒƒã€æ–‡æ¡£å®Œå–„
- **å¯å¤ç”¨**: é€šç”¨ç»„ä»¶ã€æœåŠ¡åŒ–æ¥å£

## ğŸ¯ é‡æ„å»ºè®®

### 1. æ¶æ„ä¼˜åŒ–
- **æœåŠ¡æ‹†åˆ†**: æŒ‰ä¸šåŠ¡åŸŸæ‹†åˆ†å¾®æœåŠ¡
- **æ•°æ®æ²»ç†**: ç»Ÿä¸€æ•°æ®æ¨¡å‹ã€è´¨é‡ç›‘æ§
- **ç¼“å­˜ç­–ç•¥**: Redisç¼“å­˜ã€æŸ¥è¯¢ä¼˜åŒ–

### 2. ä»£ç é‡æ„
- **è®¾è®¡æ¨¡å¼**: å¼•å…¥Repositoryã€Factoryæ¨¡å¼
- **ä¾èµ–æ³¨å…¥**: è§£è€¦æ¨¡å—ã€æé«˜å¯æµ‹è¯•æ€§
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€å¼‚å¸¸å¤„ç†ã€æ—¥å¿—è®°å½•

### 3. æ€§èƒ½ä¼˜åŒ–
- **æ•°æ®åº“**: ç´¢å¼•ä¼˜åŒ–ã€æŸ¥è¯¢é‡å†™
- **å‰ç«¯**: ä»£ç åˆ†å‰²ã€æ‡’åŠ è½½
- **API**: å“åº”ç¼“å­˜ã€é™æµæ§åˆ¶

## ğŸ“ æ€»ç»“

HotDog 2030 æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¼ä¸šçº§æ™ºèƒ½åˆ†æå¹³å°ï¼Œå…·å¤‡ï¼š
- **å®Œæ•´çš„æ•°æ®æµ**: ä»æ•°æ®æºåˆ°å‰ç«¯å±•ç¤º
- **æ™ºèƒ½åˆ†æèƒ½åŠ›**: æœºå™¨å­¦ä¹  + ä¸šåŠ¡è§„åˆ™
- **ç°ä»£åŒ–æŠ€æœ¯æ ˆ**: å¾®æœåŠ¡ + å®¹å™¨åŒ–
- **ä¸šåŠ¡ä»·å€¼**: æ•°æ®é©±åŠ¨å†³ç­–ã€è¿è¥ä¼˜åŒ–

é¡¹ç›®æ¶æ„æ¸…æ™°ã€åŠŸèƒ½å®Œæ•´ï¼Œå…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ã€‚é€šè¿‡è¿›ä¸€æ­¥çš„é‡æ„å’Œä¼˜åŒ–ï¼Œå¯ä»¥æˆä¸ºä¼ä¸šæ•°å­—åŒ–è½¬å‹çš„å…¸å‹æ¡ˆä¾‹ã€‚
