# 客群画像分析功能使用指南

## 功能概述

客群画像分析功能是基于阿里云RDS数据库cyrg2025中的客户数据，通过深度分析客户消费行为、购买偏好、时间模式等多维度信息，生成精准的客户画像，为营销决策提供数据支撑。

## 数据库设计

### 核心表结构

#### 1. customer_profiles (客户基础信息表)
- 存储客户的基本信息、消费统计、RFM评分等
- 包含客户分层、生命周期价值等关键指标

#### 2. customer_behavior (客户消费行为表)
- 记录客户每日的消费行为数据
- 包含订单数、消费金额、偏好渠道等信息

#### 3. customer_product_preferences (客户商品偏好表)
- 分析客户对商品和品类的偏好程度
- 计算偏好评分，支持个性化推荐

#### 4. customer_time_analysis (客户购买时间分析表)
- 分析客户在不同时间段的购买行为
- 支持24小时时间分布分析

#### 5. customer_channel_analysis (客户购买渠道分析表)
- 分析客户通过不同渠道的购买行为
- 支持小程序、POS、美团、饿了么等渠道

#### 6. customer_rfm_analysis (客户RFM分析表)
- 基于RFM模型进行客户价值分析
- 支持客户分层和精准营销

#### 7. customer_portrait_summary (客群画像汇总表)
- 存储不同维度的客群画像汇总数据
- 支持多层级数据聚合

#### 8. ai_marketing_suggestions (AI营销建议表)
- 存储基于客户画像生成的AI营销建议
- 支持个性化推荐和群体营销

## 功能特性

### 1. 客户分层分析
- **重要价值客户**: 高价值、高活跃度客户
- **重要发展客户**: 高价值、低活跃度客户
- **重要保持客户**: 低价值、高活跃度客户
- **重要挽留客户**: 高价值、低活跃度客户
- **一般价值客户**: 中等价值、中等活跃度客户
- **一般发展客户**: 中等价值、低活跃度客户
- **一般保持客户**: 低价值、中等活跃度客户
- **一般挽留客户**: 低价值、低活跃度客户

### 2. 消费行为分析
- **消费能力分析**: 客单价、总消费金额、消费频次
- **购买时间分析**: 24小时购买时间分布
- **购买渠道分析**: 小程序、POS、第三方平台等
- **商品偏好分析**: 品类偏好、单品偏好、交叉购买

### 3. AI智能营销建议
- **个性化推荐**: 基于客户偏好的商品推荐
- **群体营销**: 针对不同客户分层的营销策略
- **流失预警**: 识别流失风险客户并提供召回建议
- **精准营销**: 基于客户画像的精准营销方案

## 使用步骤

### 1. 数据库初始化

首先创建客群画像相关的数据库表：

```bash
cd backend
node create-customer-profile-tables.js
```

### 2. 数据同步

#### 方式一：通过API接口同步
在前端页面点击"同步数据"按钮，系统会自动从cyrg2025数据库同步数据到hotdog2030数据库。

#### 方式二：通过脚本同步
```bash
cd backend
node sync-customer-profile.js
```

### 3. 前端访问

启动前端服务后，在左侧菜单中点击"客群画像"即可访问分析页面。

## 页面功能

### 1. 筛选器
- **门店筛选**: 支持按门店查看客群画像
- **城市筛选**: 支持按城市查看客群画像
- **时间范围**: 支持按时间范围筛选数据

### 2. KPI指标
- **总客户数**: 当前筛选条件下的客户总数
- **活跃客户数**: 在指定时间范围内有购买行为的客户数
- **平均客单价**: 客户的平均单次消费金额
- **客户生命周期价值**: 客户的总消费价值

### 3. 可视化图表
- **客户分层分布**: 环形图展示不同客户分层的占比
- **购买时间分布**: 柱状图展示24小时购买时间分布
- **商品偏好TOP10**: 柱状图展示最受欢迎的商品

### 4. AI营销建议
- **建议类型**: VIP服务、精准营销、流失预警等
- **建议内容**: 具体的营销策略和实施方案
- **优先级**: 高、中、低三个优先级
- **预期效果**: 营销活动的预期效果

## 数据更新机制

### 1. 实时同步
- 通过API接口手动触发数据同步
- 支持增量更新，避免重复数据

### 2. 定时同步
- 可配置定时任务，定期同步最新数据
- 建议每日凌晨执行一次完整同步

### 3. 数据质量
- 自动过滤无效数据和异常数据
- 支持数据清洗和标准化处理

## 扩展功能

### 1. 外部数据集成
- **地理信息**: 集成高德地图API获取POI数据
- **人口数据**: 集成城市统计局数据
- **天气数据**: 集成气象局API获取天气信息
- **社交媒体**: 集成抖音、小红书等平台数据

### 2. 高级分析
- **预测分析**: 基于历史数据预测客户行为
- **关联分析**: 分析商品间的关联关系
- **聚类分析**: 基于多维度数据进行客户聚类
- **异常检测**: 识别异常消费行为和客户

### 3. 营销自动化
- **自动推荐**: 基于客户画像自动推荐商品
- **智能定价**: 基于客户价值进行动态定价
- **个性化营销**: 自动生成个性化营销内容
- **效果追踪**: 实时追踪营销活动效果

## 注意事项

### 1. 数据安全
- 客户数据属于敏感信息，需要严格保护
- 建议对敏感字段进行脱敏处理
- 定期备份重要数据

### 2. 性能优化
- 大数据量时建议使用分页查询
- 合理设置数据库索引提升查询性能
- 考虑使用缓存减少数据库压力

### 3. 数据准确性
- 定期检查数据质量，确保数据准确性
- 建立数据校验机制，及时发现数据异常
- 保持数据源的一致性

## 技术支持

如遇到问题，请联系技术支持团队或查看系统日志获取详细错误信息。 