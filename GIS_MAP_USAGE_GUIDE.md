# GIS地图可视化使用指南

## 功能概述

GIS地图可视化功能已经成功实现，现在可以在地图上直观地查看和分析意向铺位信息。

## 访问方式

1. 打开浏览器访问：`http://localhost:3000`
2. 在左侧导航菜单中点击 **"GIS地图展示"**
3. 或者直接访问：`http://localhost:3000/gis-map`

## 主要功能

### 1. 地图展示
- **底图**：使用高德地图作为底图
- **中心位置**：默认以大连市中心为地图中心
- **缩放级别**：默认缩放级别为11，可手动调整

### 2. 意向铺位标记
- **标记样式**：圆形标记，颜色根据风险等级显示
  - 🟢 绿色：低风险
  - 🟡 黄色：中风险  
  - 🔴 红色：高风险
- **标记内容**：显示选址评分（0-100分）
- **点击交互**：点击标记可查看详细信息

### 3. 筛选功能
- **城市筛选**：按城市筛选铺位（大连、沈阳、北京等）
- **状态筛选**：按分析状态筛选（已分析、待分析、已拒绝）
- **评分筛选**：按评分等级筛选
  - 优秀：≥80分
  - 良好：60-79分
  - 较差：<60分
- **搜索功能**：按铺位名称或地址搜索

### 4. 详细信息展示
- **铺位详情**：点击标记后弹出模态框显示详细信息
- **分析结果**：显示选址评分、预测营收、置信度等
- **周边环境**：可查看周边POI信息（餐厅、学校、医院等）

### 5. 数据统计
- **实时统计**：显示当前筛选条件下的铺位数量
- **总览信息**：显示总铺位数和筛选后的数量

## 技术特性

### 1. 高德地图集成
- **API密钥**：已配置有效的高德地图API密钥
- **插件支持**：支持缩放、工具栏、地理编码、地点搜索等功能
- **响应式设计**：适配不同屏幕尺寸

### 2. 数据集成
- **实时数据**：从后端API实时获取意向铺位数据
- **数据同步**：支持274个意向铺位的实时展示
- **坐标解析**：自动解析经纬度坐标并在地图上标记

### 3. 性能优化
- **懒加载**：地图脚本按需加载
- **标记优化**：智能标记渲染，避免性能问题
- **缓存机制**：API响应缓存，提高加载速度

## 使用建议

### 1. 选址分析
1. 使用筛选功能找到特定区域的铺位
2. 点击标记查看详细分析结果
3. 结合周边环境信息进行综合评估

### 2. 批量分析
1. 先使用城市筛选缩小范围
2. 按评分筛选找到优质铺位
3. 点击"显示周边"查看环境信息

### 3. 决策支持
1. 对比不同铺位的评分和预测营收
2. 分析风险等级和置信度
3. 结合地图位置和周边环境做最终决策

## 故障排除

### 1. 地图不显示
- 检查网络连接
- 确认API密钥有效
- 清除浏览器缓存

### 2. 标记不显示
- 检查数据是否正常加载
- 确认坐标格式正确
- 查看浏览器控制台错误信息

### 3. 筛选不生效
- 确认筛选条件设置正确
- 检查数据是否包含筛选字段
- 刷新页面重新加载数据

## 更新日志

- ✅ 修复高德地图API密钥问题
- ✅ 修复Antd Modal警告
- ✅ 实现地图标记和信息窗口
- ✅ 添加筛选和搜索功能
- ✅ 集成意向铺位数据展示

## 下一步计划

- 🔄 优化地图性能
- 🔄 添加更多POI类型
- 🔄 实现路径规划功能
- 🔄 添加热力图分析
- 🔄 支持数据导出功能
