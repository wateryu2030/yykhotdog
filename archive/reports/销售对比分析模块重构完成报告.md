# é”€å”®å¯¹æ¯”åˆ†æžæ¨¡å—é‡æž„å®ŒæˆæŠ¥å‘Š

## ðŸŽ¯ é‡æž„æ¦‚è¿°

æ ¹æ®OpenAIçš„æ”¹è¿›å»ºè®®ï¼Œæˆ‘ä»¬æˆåŠŸå®Œæˆäº†é”€å”®å¯¹æ¯”åˆ†æžæ¨¡å—çš„å…¨é¢é‡æž„ï¼Œå®žçŽ°äº†å¤šç»´åº¦ã€å¤šå±‚æ¬¡çš„é”€å”®æ•°æ®å¯¹æ¯”åˆ†æžåŠŸèƒ½ã€‚

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. åŽç«¯APIæž¶æž„é‡æž„

#### æ–°å¢žAPIæŽ¥å£
- **åŸŽå¸‚å¯¹æ¯”åˆ†æžAPI**: `/api/sales-comparison/city-comparison`
  - æ”¯æŒå¤šåŸŽå¸‚å¯¹æ¯”åˆ†æž
  - æä¾›é—¨åº—æ•°é‡ã€é”€å”®é¢ã€è®¢å•æ•°ã€å®¢å•ä»·ç­‰æŒ‡æ ‡
  - æ”¯æŒå‰ä¸€æœŸã€åŽ»å¹´åŒæœŸã€ä¸ŠæœˆåŒæœŸå¯¹æ¯”

- **é—¨åº—å¯¹æ¯”åˆ†æžAPI**: `/api/sales-comparison/store-comparison`
  - æ”¯æŒå¤šé—¨åº—å¯¹æ¯”åˆ†æž
  - æä¾›é”€å”®é¢ã€åªæ•ˆã€äººæ•ˆã€å®¢å•ä»·ç­‰æŒ‡æ ‡
  - æ”¯æŒæŒ‰åŸŽå¸‚ç­›é€‰é—¨åº—

- **å•†å“å¯¹æ¯”åˆ†æžAPI**: `/api/sales-comparison/product-comparison`
  - æ”¯æŒå•†å“é”€å”®å¯¹æ¯”åˆ†æž
  - æä¾›é”€å”®é¢ã€é”€é‡ã€å•ä»·ã€é”€å”®é—¨åº—æ•°ç­‰æŒ‡æ ‡
  - æ”¯æŒæŒ‰å•†å“å“ç±»ç­›é€‰

- **è¿è¥æ•ˆçŽ‡å¯¹æ¯”API**: `/api/sales-comparison/efficiency-comparison`
  - æ”¯æŒè¿è¥æ•ˆçŽ‡æŒ‡æ ‡å¯¹æ¯”
  - æä¾›åªæ•ˆã€äººæ•ˆã€æ—¥è®¢å•æ•°ã€ç§Ÿé‡‘å›žæŠ¥çŽ‡ç­‰æŒ‡æ ‡
  - æ”¯æŒå¤šé—¨åº—æ•ˆçŽ‡å¯¹æ¯”

#### APIåŠŸèƒ½ç‰¹æ€§
1. **å¤šç»´åº¦å¯¹æ¯”æ”¯æŒ**
   - åŸŽå¸‚çº§å¯¹æ¯”ï¼šé—¨åº—æ•°é‡ã€é”€å”®é¢ã€è®¢å•æ•°ã€å®¢å•ä»·ã€å•åº—é”€å”®é¢
   - é—¨åº—çº§å¯¹æ¯”ï¼šé”€å”®é¢ã€åªæ•ˆã€äººæ•ˆã€å®¢å•ä»·ã€è¿è¥æ•ˆçŽ‡
   - å•†å“çº§å¯¹æ¯”ï¼šé”€å”®é¢ã€é”€é‡ã€å•ä»·ã€é”€å”®é—¨åº—æ•°ã€å®¢æˆ·æ•°
   - æ•ˆçŽ‡çº§å¯¹æ¯”ï¼šåªæ•ˆã€äººæ•ˆã€æ—¥è®¢å•æ•°ã€ç§Ÿé‡‘å›žæŠ¥çŽ‡

2. **çµæ´»çš„å¯¹æ¯”ç±»åž‹**
   - `previous`: å‰ä¸€ä¸ªç›¸åŒé•¿åº¦çš„æœŸé—´
   - `same_period_last_year`: åŽ»å¹´åŒæœŸ
   - `same_period_last_month`: ä¸ŠæœˆåŒæœŸ

3. **æ™ºèƒ½æ•°æ®èšåˆ**
   - è‡ªåŠ¨è®¡ç®—å¯¹æ¯”æœŸé—´çš„å·®å¼‚å’Œç™¾åˆ†æ¯”å˜åŒ–
   - æä¾›è¶‹åŠ¿åˆ†æžï¼ˆä¸Šå‡/ä¸‹é™/ç¨³å®šï¼‰
   - æ”¯æŒå¤šç»´åº¦æ•°æ®ç­›é€‰

### 2. å‰ç«¯é¡µé¢é‡æž„

#### æ–°çš„é”€å”®å¯¹æ¯”åˆ†æžé¡µé¢ (`SalesComparisonNew.tsx`)
- **æ ‡ç­¾é¡µå¼ç•Œé¢è®¾è®¡**
  - åŸŽå¸‚å¯¹æ¯”æ ‡ç­¾é¡µ
  - é—¨åº—å¯¹æ¯”æ ‡ç­¾é¡µ
  - å•†å“å¯¹æ¯”æ ‡ç­¾é¡µ
  - è¿è¥æ•ˆçŽ‡å¯¹æ¯”æ ‡ç­¾é¡µ
  - å°æ—¶çº§å¯¹æ¯”æ ‡ç­¾é¡µ

- **ç»Ÿä¸€çš„ç­›é€‰æŽ§åˆ¶**
  - æ—¥æœŸèŒƒå›´é€‰æ‹©å™¨
  - å¯¹æ¯”ç±»åž‹é€‰æ‹©å™¨
  - åŸŽå¸‚å¤šé€‰ç­›é€‰å™¨
  - é—¨åº—å¤šé€‰ç­›é€‰å™¨
  - å•†å“å“ç±»ç­›é€‰å™¨

- **æ•°æ®å±•ç¤ºç»„ä»¶**
  - ç»Ÿè®¡å¡ç‰‡å±•ç¤ºå…³é”®æŒ‡æ ‡
  - è¡¨æ ¼å±•ç¤ºè¯¦ç»†å¯¹æ¯”æ•°æ®
  - è¶‹åŠ¿å›¾æ ‡å’Œé¢œè‰²ç¼–ç 
  - å°æ—¶çº§å¯¹æ¯”å›¾è¡¨é›†æˆ

#### ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- **å“åº”å¼è®¾è®¡**: æ”¯æŒä¸åŒå±å¹•å°ºå¯¸
- **åŠ è½½çŠ¶æ€**: æ¸…æ™°çš„åŠ è½½æŒ‡ç¤ºå™¨
- **é”™è¯¯å¤„ç†**: å‹å¥½çš„é”™è¯¯æç¤º
- **æ•°æ®ç¼“å­˜**: ä¼˜åŒ–æ•°æ®åŠ è½½æ€§èƒ½

### 3. æ•°æ®å¯¹æ¯”é€»è¾‘

#### å¯¹æ¯”è®¡ç®—ç®—æ³•
```typescript
// é”€å”®é¢å˜åŒ–è®¡ç®—
const salesChange = currentSales - compareSales;
const salesChangePercent = compareSales > 0 ? (salesChange / compareSales) * 100 : 0;

// è¶‹åŠ¿åˆ¤æ–­
const trend = salesChangePercent > 5 ? 'up' : salesChangePercent < -5 ? 'down' : 'stable';
```

#### æ•°æ®èšåˆç­–ç•¥
- **åŸŽå¸‚çº§èšåˆ**: æŒ‰åŸŽå¸‚åˆ†ç»„ç»Ÿè®¡é—¨åº—æ•°æ®
- **é—¨åº—çº§èšåˆ**: æŒ‰é—¨åº—ç»Ÿè®¡é”€å”®å’Œæ•ˆçŽ‡æŒ‡æ ‡
- **å•†å“çº§èšåˆ**: æŒ‰å•†å“ç»Ÿè®¡é”€å”®å’Œåˆ†å¸ƒæ•°æ®
- **æ•ˆçŽ‡çº§èšåˆ**: æŒ‰é—¨åº—ç»Ÿè®¡è¿è¥æ•ˆçŽ‡æŒ‡æ ‡

## ðŸ”§ æŠ€æœ¯å®žçŽ°

### åŽç«¯æŠ€æœ¯æ ˆ
- **Node.js + Express**: APIæœåŠ¡æ¡†æž¶
- **Sequelize**: ORMæ•°æ®åº“æ“ä½œ
- **SQL Server**: æ•°æ®å­˜å‚¨
- **TypeScript**: ç±»åž‹å®‰å…¨

### å‰ç«¯æŠ€æœ¯æ ˆ
- **React + TypeScript**: å‰ç«¯æ¡†æž¶
- **Ant Design**: UIç»„ä»¶åº“
- **Chart.js**: å›¾è¡¨å¯è§†åŒ–
- **Axios**: HTTPå®¢æˆ·ç«¯

### æ•°æ®åº“è®¾è®¡
- **storesè¡¨**: é—¨åº—åŸºç¡€ä¿¡æ¯
- **ordersè¡¨**: è®¢å•æ•°æ®
- **order_itemsè¡¨**: è®¢å•æ˜Žç»†
- **customersè¡¨**: å®¢æˆ·ä¿¡æ¯

## ðŸ“Š åŠŸèƒ½ç‰¹æ€§

### 1. å¤šç»´åº¦å¯¹æ¯”åˆ†æž
- **åœ°ç†ç»´åº¦**: åŸŽå¸‚ã€åŒºåŸŸã€é—¨åº—
- **æ—¶é—´ç»´åº¦**: æ—¥ã€å‘¨ã€æœˆã€å¹´
- **ä¸šåŠ¡ç»´åº¦**: å•†å“ã€å®¢æˆ·ã€æ”¯ä»˜æ–¹å¼
- **æ•ˆçŽ‡ç»´åº¦**: åªæ•ˆã€äººæ•ˆã€ç§Ÿé‡‘å›žæŠ¥çŽ‡

### 2. æ™ºèƒ½è¶‹åŠ¿åˆ†æž
- **è‡ªåŠ¨è¶‹åŠ¿è¯†åˆ«**: ä¸Šå‡ã€ä¸‹é™ã€ç¨³å®š
- **å˜åŒ–ç™¾åˆ†æ¯”è®¡ç®—**: ç²¾ç¡®çš„æ•°å€¼å˜åŒ–
- **è¶‹åŠ¿å›¾æ ‡æ˜¾ç¤º**: ç›´è§‚çš„è§†è§‰åé¦ˆ
- **é¢œè‰²ç¼–ç **: ç»¿è‰²ä¸Šå‡ã€çº¢è‰²ä¸‹é™ã€è“è‰²ç¨³å®š

### 3. çµæ´»çš„ç­›é€‰æ¡ä»¶
- **æ—¥æœŸèŒƒå›´**: è‡ªå®šä¹‰æ—¶é—´åŒºé—´
- **å¯¹æ¯”ç±»åž‹**: å¤šç§å¯¹æ¯”åŸºå‡†
- **å¤šé€‰ç­›é€‰**: æ”¯æŒå¤šåŸŽå¸‚ã€å¤šé—¨åº—ã€å¤šå•†å“
- **å®žæ—¶æ›´æ–°**: ç­›é€‰æ¡ä»¶å˜åŒ–æ—¶è‡ªåŠ¨åˆ·æ–°æ•°æ®

## ðŸš€ æ€§èƒ½ä¼˜åŒ–

### 1. æ•°æ®ç¼“å­˜
- **å®¢æˆ·ç«¯ç¼“å­˜**: 5åˆ†é’ŸTTLç¼“å­˜
- **è¯·æ±‚åŽ»é‡**: é¿å…é‡å¤è¯·æ±‚
- **ç¼“å­˜æ¸…ç†**: è‡ªåŠ¨æ¸…ç†è¿‡æœŸç¼“å­˜

### 2. æŸ¥è¯¢ä¼˜åŒ–
- **SQLä¼˜åŒ–**: é«˜æ•ˆçš„æ•°æ®åº“æŸ¥è¯¢
- **ç´¢å¼•ä½¿ç”¨**: åˆç†ä½¿ç”¨æ•°æ®åº“ç´¢å¼•
- **åˆ†é¡µåŠ è½½**: å¤§æ•°æ®é›†åˆ†é¡µå¤„ç†

### 3. å‰ç«¯ä¼˜åŒ–
- **ç»„ä»¶æ‡’åŠ è½½**: æŒ‰éœ€åŠ è½½ç»„ä»¶
- **æ•°æ®é¢„åŠ è½½**: æå‰åŠ è½½å¸¸ç”¨æ•°æ®
- **é”™è¯¯è¾¹ç•Œ**: ä¼˜é›…çš„é”™è¯¯å¤„ç†

## ðŸ“ˆ ä¸šåŠ¡ä»·å€¼

### 1. è¿è¥å†³ç­–æ”¯æŒ
- **é—¨åº—é€‰å€**: é€šè¿‡åŸŽå¸‚å¯¹æ¯”åˆ†æžé€‰å€
- **å•†å“ä¼˜åŒ–**: é€šè¿‡å•†å“å¯¹æ¯”ä¼˜åŒ–å•†å“ç»“æž„
- **æ•ˆçŽ‡æå‡**: é€šè¿‡æ•ˆçŽ‡å¯¹æ¯”æå‡è¿è¥æ•ˆçŽ‡
- **è¶‹åŠ¿é¢„æµ‹**: é€šè¿‡è¶‹åŠ¿åˆ†æžé¢„æµ‹æœªæ¥è¡¨çŽ°

### 2. ç®¡ç†æ•ˆçŽ‡æå‡
- **æ•°æ®å¯è§†åŒ–**: ç›´è§‚çš„æ•°æ®å±•ç¤º
- **å¤šç»´åº¦åˆ†æž**: å…¨é¢çš„æ•°æ®åˆ†æžè§†è§’
- **å®žæ—¶ç›‘æŽ§**: å®žæ—¶çš„æ•°æ®æ›´æ–°
- **æ™ºèƒ½æ´žå¯Ÿ**: è‡ªåŠ¨çš„è¶‹åŠ¿è¯†åˆ«

### 3. ç«žäº‰ä¼˜åŠ¿
- **æ•°æ®é©±åŠ¨**: åŸºäºŽæ•°æ®çš„å†³ç­–
- **ç²¾ç»†åŒ–ç®¡ç†**: ç²¾ç»†åŒ–çš„è¿è¥ç®¡ç†
- **å¿«é€Ÿå“åº”**: å¿«é€Ÿçš„å¸‚åœºå“åº”
- **æŒç»­ä¼˜åŒ–**: æŒç»­çš„è¿è¥ä¼˜åŒ–

## ðŸ”® æœªæ¥è§„åˆ’

### 1. åŠŸèƒ½æ‰©å±•
- **æ›´å¤šå¯¹æ¯”ç»´åº¦**: å®¢æˆ·ç¾¤ä½“ã€æ”¯ä»˜æ–¹å¼ç­‰
- **é«˜çº§åˆ†æž**: ç›¸å…³æ€§åˆ†æžã€å›žå½’åˆ†æž
- **é¢„æµ‹æ¨¡åž‹**: åŸºäºŽåŽ†å²æ•°æ®çš„é¢„æµ‹
- **å¼‚å¸¸æ£€æµ‹**: è‡ªåŠ¨è¯†åˆ«å¼‚å¸¸æ•°æ®

### 2. æŠ€æœ¯ä¼˜åŒ–
- **å®žæ—¶æ•°æ®**: å®žæ—¶æ•°æ®æ›´æ–°
- **å¤§æ•°æ®æ”¯æŒ**: æ”¯æŒæ›´å¤§è§„æ¨¡æ•°æ®
- **AIé›†æˆ**: é›†æˆAIåˆ†æžèƒ½åŠ›
- **ç§»åŠ¨ç«¯**: ç§»åŠ¨ç«¯åº”ç”¨æ”¯æŒ

### 3. ç”¨æˆ·ä½“éªŒ
- **ä¸ªæ€§åŒ–**: ä¸ªæ€§åŒ–åˆ†æžç•Œé¢
- **åä½œåŠŸèƒ½**: å›¢é˜Ÿåä½œåˆ†æž
- **æŠ¥å‘Šç”Ÿæˆ**: è‡ªåŠ¨ç”Ÿæˆåˆ†æžæŠ¥å‘Š
- **æ•°æ®å¯¼å‡º**: å¤šæ ¼å¼æ•°æ®å¯¼å‡º

## ðŸ“ æ€»ç»“

é”€å”®å¯¹æ¯”åˆ†æžæ¨¡å—çš„é‡æž„æˆåŠŸå®žçŽ°äº†ï¼š

1. **æž¶æž„ä¼˜åŒ–**: ä»Žå•ä¸€åŠŸèƒ½æ¨¡å—å‡çº§ä¸ºå¤šç»´åº¦åˆ†æžå¹³å°
2. **åŠŸèƒ½å®Œå–„**: æ”¯æŒåŸŽå¸‚ã€é—¨åº—ã€å•†å“ã€æ•ˆçŽ‡ç­‰å¤šç»´åº¦å¯¹æ¯”
3. **ç”¨æˆ·ä½“éªŒ**: æä¾›ç›´è§‚ã€æ˜“ç”¨çš„åˆ†æžç•Œé¢
4. **æ€§èƒ½æå‡**: ä¼˜åŒ–æ•°æ®åŠ è½½å’Œå±•ç¤ºæ€§èƒ½
5. **ä¸šåŠ¡ä»·å€¼**: ä¸ºè¿è¥å†³ç­–æä¾›æ•°æ®æ”¯æŒ

è¿™æ¬¡é‡æž„ä¸ä»…è§£å†³äº†åŽŸæœ‰åŠŸèƒ½çš„é—®é¢˜ï¼Œè¿˜ä¸ºæœªæ¥çš„åŠŸèƒ½æ‰©å±•å¥ å®šäº†åšå®žçš„åŸºç¡€ã€‚é€šè¿‡å¤šç»´åº¦ã€å¤šå±‚æ¬¡çš„å¯¹æ¯”åˆ†æžï¼Œç®¡ç†è€…å¯ä»¥æ›´å¥½åœ°äº†è§£ä¸šåŠ¡çŠ¶å†µï¼Œåšå‡ºæ›´æ˜Žæ™ºçš„å†³ç­–ã€‚

---

**å®Œæˆæ—¶é—´**: 2025å¹´10æœˆ26æ—¥  
**é‡æž„èŒƒå›´**: åŽç«¯API + å‰ç«¯é¡µé¢ + æ•°æ®é€»è¾‘  
**æŠ€æœ¯æ ˆ**: Node.js + React + TypeScript + SQL Server  
**çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶æµ‹è¯•é€šè¿‡
